# -*-coding:utf-8 -*-import subprocessimport osimport sysfrom commands import getstatusoutput as gsogame_path = '/data/game'game_file = '/data/game/game-server6'def copy_file(index):	if os.path.isdir(game_file):		cmd="cp -r /data/game/game-server6 /data/game/game-server%s"%index		status, result = gso(cmd)		if status == 0:			print u"---游戏服拷贝成功---"		else:		    print u"拷贝失败"	else:		print u"模板文件不存在"def main(index):	newname = '/data/game/game-server%s' % index	app_conf=os.path.join(newname,'config/app.properties')	print app_conf	log4j2_conf=os.path.join(newname,'config/log4j2.xml')	print  log4j2_conf	cmd = "sed -i \"s/s6/s{0}/g\" {1}".format(index,log4j2_conf)	subprocess.call(cmd, shell=True)	cmd_id="sed -i \"s/base.id                                = 6/base.id                                = {0}/g\" {1}".format(index,app_conf)	subprocess.call(cmd_id, shell=True)	cmd_name="sed -i \"s/base.name                              = s6/base.name                              = s{0}/g\" {1}".format(index,app_conf)	subprocess.call(cmd_name, shell=True)	cmd_web="sed -i \"s/base.web                               = 9601/base.web                               = 960{0}/g\" {1}".format(index,app_conf)	subprocess.call(cmd_web, shell=True)	cmd_redis="sed -i \"s/127.0.0.1:6379:1/127.0.0.1:6379:{0}/g\"  {1}".format(index,app_conf)	subprocess.call(cmd_redis, shell=True)	cmd_local="sed -i \"s/game-server6/game-server{0}/g\" {1}".format(index,app_conf)	subprocess.call(cmd_local, shell=True)	cmd_ip="sed -i \"s/0.0.0.0:9501/0.0.0.0:950{0}/g\" {1}".format(index,app_conf)	ret =subprocess.call(cmd_ip, shell=True)	if ret == 0:	   print u"----share.local修改成功----"	cmd_url="sed -i \"s/sgzs_server_6/sgzs_server_{0}/g\" {1}".format(index,app_conf)	subprocess.call(cmd_url, shell=True)	print u"----配置修改成功----"if __name__ == '__main__':    print "name：",sys.argv[0]    print len(sys.argv)    if len(sys.argv) != 2:        print u"请输入一个数字作为区服号"        exit(1)    index = str(sys.argv[1])    if index.isdigit() != True:	    print u"请输入数字"	    exit(1)    copy_file(index)    main(index)