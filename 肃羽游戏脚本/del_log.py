# -*-coding:utf-8 -*-import datetimeimport osimport globimport reimport subprocessfrom commands import getstatusoutput as gsoBASE_PATH='/data/game'days=-15del_date = (datetime.datetime.now() + datetime.timedelta(days=days))print(del_date)dir_list = glob.glob(BASE_PATH + "/game-server[0-9]*/log/error/")print(dir_list)for log_dir in dir_list:	if os.path.isdir(log_dir):		print(os.listdir(log_dir))		for file in os.listdir(log_dir):			m = re.search(r"\D{14}\d{4}(\-|\/|.)\d{1,2}\1\d{1,2}\1\d{1}\D{7}",file,re.I)			if m!=None:				file_name = m.group()				file_name_cut = file_name[14:-9]				file_name_str = file_name_cut + ' 00:00:00'				file_date = datetime.datetime.strptime(file_name_str,'%Y-%m-%d %H:%M:%S')				if del_date > file_date:					print(u"发现过期的server-status日志")					log_file=log_dir+file_name					print(log_file)					# cmd = "rm -f {0}".format(log_file)					# ret = subprocess.call(cmd, shell=True)					# if ret==0:					# 	print u"删除%s"%(file_name)					# else:					# 	print u"删除失败"				else:					print(u"未发现server-status日志")					print(file_name)			else:				n = re.search(r"error\-\d{4}(\-|\/|.)\d{1,2}\1\d{1,2}\1\d{1}\.log\.gz", file)				if n!=None:					file_name = n.group()					file_name_cut = file_name[6:-9]					file_name_str = file_name_cut + ' 00:00:00'					file_date = datetime.datetime.strptime(file_name_str, '%Y-%m-%d %H:%M:%S')					if del_date > file_date:						print(u"发现过期的error日志")						log_file = log_dir + file_name						print(log_file)						# cmd = "rm -f {0}".format(log_file)						# ret = subprocess.call(cmd, shell=True)						# if ret == 0:						# 	print u"删除%s" % (file_name)						# else:						# 	print u"删除失败"					else:						print(u"未发现error日志")						print(file_name)			    																																															